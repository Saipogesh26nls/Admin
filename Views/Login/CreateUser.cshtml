@model Admin.Models.SignupModel

<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="~/Content/bootstrap-4.0.0.min.css">
    <script src="~/Scripts/bootstrap-4.0.0.bundle.min.js"></script>
    <script type="text/javascript" src="~/Scripts/jquery-3.5.1.min.js"></script>
    <link rel="stylesheet" href="~/Content/Purchase.css" />
</head>
<body style="background-color: #f5f5f7;">
    <br />

    <p>
        &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @Html.LabelFor(model => model.DisplayName) &nbsp; &nbsp; : &nbsp; &nbsp; @Html.EditorFor(model => model.DisplayName, new { htmlAttributes = new { @style = "width:200px;" } }) &nbsp; &nbsp; @Html.LabelFor(model => model.UserName) &nbsp; &nbsp; : &nbsp; &nbsp; @Html.EditorFor(model => model.UserName, new { htmlAttributes = new { @style = "width:200px;" } })
        &nbsp; &nbsp; @Html.LabelFor(model => model.Password) &nbsp; &nbsp; : &nbsp; &nbsp; @Html.EditorFor(model => model.Password, new { htmlAttributes = new { @style = "width:200px;" } }) &nbsp; &nbsp; @Html.LabelFor(model => model.Roll) &nbsp; &nbsp; : &nbsp; &nbsp; @Html.DropDownListFor(model => model.Roll, ViewBag.LROLL as SelectList, new { htmlAttributes = new { } }) &nbsp; &nbsp; &nbsp; Select-all &nbsp; <input type="checkbox" id="select-all">
    </p>
    <div style="overflow-y: auto; border-bottom: 1px solid #cacccb; height: 600px;">
        <table id="selected_units" class="table text-sm font-weight-normal" style="margin-top:10px;text-align:center;">
            <thead>
                <tr>
                    <th>Menu</th>
                    <th>View</th>
                    <th>Add</th>
                    <th>Edit</th>
                    <th>Delete</th>
                    <th>Disable_Enable</th>
                    <th style="display:none">displayname</th>
                    <th style="display:none">username</th>
                    <th style="display:none">password</th>
                    <th style="display:none">roll</th>
                </tr>
            </thead>
            <tbody>
                @{ int i = 0; }
                @foreach (System.Data.DataRow dr in ViewBag.PL.Rows)
                {

                <tr id="data" style="font-size:13px;">
                    <td class="row-data">@dr["Menu"].ToString()</td>
                    <td class="row-data"> &nbsp; View @Html.CheckBoxFor(model => model.View) &nbsp;</td>
                    <td class="row-data"> &nbsp; Add @Html.CheckBoxFor(model => model.Add) &nbsp;</td>
                    <td class="row-data"> &nbsp; Edit @Html.CheckBoxFor(model => model.Edit) &nbsp;</td>
                    <td class="row-data"> &nbsp; Delete @Html.CheckBoxFor(model => model.Delete) &nbsp;</td>
                    <td class="row-data"> &nbsp; Disable @Html.CheckBoxFor(model => model.Disable) &nbsp;</td>
                    <td class="row-data" style="display:none;" id="display"></td>
                    <td class="row-data" style="display:none;" id="user"></td>
                    <td class="row-data" style="display:none;" id="pass"></td>
                    <td class="row-data" style="display:none;" id="roll"></td>
                </tr>
                    i++;
                }
            </tbody>
        </table>
    </div>
    <br/>
    <button class="btn btn-sm btn-secondary" id="Submit" style="width:75px;margin-left:5%;" onclick="project()">Submit</button>
    <p id="message"></p>
</body>
</html>
<script>
    function project() {
        var DisplayName = document.getElementById("DisplayName").value;
        var UserName = document.getElementById("UserName").value;
        var Password = document.getElementById("Password").value;
        var Roll = document.getElementById("Roll").value;

        document.getElementById("display").innerHTML = DisplayName;
        document.getElementById("user").innerHTML = UserName;
        document.getElementById("pass").innerHTML = Password;
        document.getElementById("roll").innerHTML = Roll;

        if (DisplayName == "") {
            var qty_err = '<p style="color:red;">Field Display Name is required !!!<p/>';
            document.getElementById("message").innerHTML = qty_err;
            return;
        }
        if (UserName == "") {
            var qty_err = '<p style="color:red;">Field Username is required !!!<p/>';
            document.getElementById("message").innerHTML = qty_err;
            return;
        }
        if (Password == "") {
            var qty_err = '<p style="color:red;">Field Password is required !!!<p/>';
            document.getElementById("message").innerHTML = qty_err;
            return;
        }

        var myRows = [];
        var headersText = [];
        var $headers = $("#selected_units th");
        var $rows = $("#selected_units tbody #data").each(function (index) {
            $cells = $(this).find("td");
            myRows[index] = {};

            $cells.each(function (cellIndex) {
                if (headersText[cellIndex] === undefined) {
                    headersText[cellIndex] = $($headers[cellIndex]).text();
                }
                myRows[index][headersText[cellIndex]] = $(this).text();
            });
        });

        var myObj = {
            "myrows": myRows
        };
        $.ajax({
            url: '/Login/Add_UserData',
            data: JSON.stringify(myRows),
            type: 'POST',
            contentType: 'application/json;',
            dataType: 'json',
            success: function (result) {
                //alert(result.ItemList[0].Str);
                var modal2 = document.getElementById("myModal2");
                modal2.style.display = "block";
                var data = result;
                var vno = '<p style="background-color:yellow;width:20%">Your Voucher.No is ' + data + '<p/>';
                document.getElementById("voucher_view").innerHTML = "Your Voucher.No is " + data + "";
                document.getElementById("Voucher_No").value = data;
                var submit = '<p style="color:red;">Submitted Successfully !!!<p/>';
                document.getElementById("submit_view").innerHTML = submit;
                setTimeout(function () {
                    window.location.reload(1);
                }, 3000);
            }
        });
    }

    @*$('#Disable').click(function () {
        // Get the checkbox
        var checkBox = document.getElementById("Disable");

        // If the checkbox is checked, display the output text
        if (checkBox.checked == true) {
            $('#View').prop('disabled', true);
            $('#Add').prop('disabled', true);
            $('#Edit').prop('disabled', true);
            $('#Delete').prop('disabled', true);
            $('#View').prop('checked', false);
            $('#Add').prop('checked', false);
            $('#Edit').prop('checked', false);
            $('#Delete').prop('checked', false);
        }
        else {
            $('#View').prop('disabled', false);
            $('#Add').prop('disabled', false);
            $('#Edit').prop('disabled', false);
            $('#Delete').prop('disabled', false);
        }
    });*@

    $(document).ready(function () {
        $('#select-all').click(function () {
            var checked = this.checked;
            $('input[type="checkbox"]').each(function () {
                this.checked = checked;
            });
            var checkBox = document.getElementById("Disable");

            // If the checkbox is checked, display the output text
            if (checkBox.checked == true) {
                $('#View').prop('disabled', true);
                $('#Add').prop('disabled', true);
                $('#Edit').prop('disabled', true);
                $('#Delete').prop('disabled', true);
                $('#View').prop('checked', false);
                $('#Add').prop('checked', false);
                $('#Edit').prop('checked', false);
                $('#Delete').prop('checked', false);
            }
            else {
                $('#View').prop('disabled', false);
                $('#Add').prop('disabled', false);
                $('#Edit').prop('disabled', false);
                $('#Delete').prop('disabled', false);
            }
        })
    });
    $(':checkbox').on('change', function () {
        $(this).closest('tr').find(':checkbox').prop('checked', this.checked);
    });
</script>

